<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.everyfarm.farmer.FarmerDAO">

	<select id="flist" resultType="kr.co.everyfarm.farmer.FarmerBean">
		select * from farmer
	</select>

	<insert id="fjoin"
		parameterType="kr.co.everyfarm.farmer.FarmerBean">
		insert into farmer (f_id,
		f_name, f_pw, f_Addr, f_tel,
		f_birth,
		f_profile, f_auth)
		Values (#{f_Id}, #{f_Name}, #{f_Pw},
		#{f_Addr}, #{f_Tel}, #{f_Birth}, #{f_Profile}, #{f_Auth})
	</insert>

	<select id="flogin" resultType="kr.co.everyfarm.farmer.FarmerBean">
		select * from farmer where f_id =
		#{f_Id} and f_pw = #{f_Pw}
	</select>

	<select id="fInfo" resultType="kr.co.everyfarm.farmer.FarmerBean">
		select * from member where
		f_id=#{f_Id}
	</select>

	<update id="fUpdate">
		update farmer set
		f_Pw=#{f_Pw},
		f_Name=#{f_Name},
		f_Addr=#{f_Addr},
		f_tel=#{f_Tel},
		f_birth=#{f_Birth},
		f_profile=#{f_Profile},
		f_auth=#{f_Auth},
		where f_id=#{f_Id}
	</update>

	<delete id="fDelete">
		delete from farmer where f_id=#{f_Id}
	</delete>

	<select id="checkId" resultType="int">
		select count(*) from farmer
		where f_Id = #{f_Id}
	</select>

	<update id="upPw">
		update farmer set f_Pw = #{f_Pw} where f_Id = #{f_Id}
	</update>

	<select id="findId" resultType="kr.co.everyfarm.farmer.FarmerBean">
		select * from farmer where
		f_name=#{f_Name} and f_tel=#{f_Tel}
	</select>

	<select id="findPw" resultType="kr.co.everyfarm.farmer.FarmerBean">
		select * from farmer where
		f_id=#{f_Id} and f_name=#{f_Name} and f_tel=#{f_Tel}
	</select>
	
	
	
	<!-- 차트 -->
	<select id="searchPno" resultType="kr.co.everyfarm.payment.PaymentBean">
		select p_no as pay_no from product where p_Id=#{f_Id}
	</select>
	
	<select id="seedSum" resultType="kr.co.everyfarm.payment.PaymentBean"> 
		select ifnull(pay_seed,0) as pay_seed, ifnull(sum(pay_land),0) as pay_land from payment where (pay_date BETWEEN DATE_ADD(NOW(),INTERVAL -1 WEEK) AND NOW())
		and pay_seed =#{pay_Seed} and pay_no=#{pay_No}
		
	</select>
	
	
	
</mapper>