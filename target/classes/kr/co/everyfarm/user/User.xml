<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.everyfarm.user.MemberDAO">

	<select id="mlist" resultType="kr.co.everyfarm.user.MemberBean">
		select * from member
	</select>

	<insert id="mjoin" parameterType="kr.co.everyfarm.user.MemberBean">
		insert into member (m_id, m_name, m_pw, m_Addr, m_tel,
		m_birth, m_profile)
		Values (#{m_Id}, #{m_Name}, #{m_Pw}, #{m_Addr},
		#{m_Tel}, #{m_Birth}, #{m_Profile})
	</insert>

	<insert id="kakaoJoin">
	    insert into member(m_id, m_name, m_pw, m_Addr, m_tel, m_birth, m_Profile)
	    values (#{m_Id}, #{m_Name}, "카카오", "카카오", "카카오", "카카오", #{m_Profile})
	</insert>

	<select id="mlogin" resultType="kr.co.everyfarm.user.MemberBean">
		select * from member where m_id =
		#{m_Id} and m_pw = #{m_Pw}
	</select>

	<select id="mInfo" resultType="kr.co.everyfarm.user.MemberBean">
		select * from member where
		m_id=#{m_Id}
	</select>

	<update id="mUpdate">
		UPDATE member SET
		m_Pw = #{m_Pw},
		m_Addr = #{m_Addr},
		m_tel = #{m_Tel}
		where m_id=#{m_Id}
	</update>

	<update id="mDelete">
		UPDATE member SET
		m_Id = sysdate(),
		m_Pw = '탈퇴한 회원입니다',
		m_Name = '탈퇴한 회원입니다',
		m_Addr = '탈퇴한 회원입니다',
		m_tel = '탈퇴한 회원입니다',
		m_Birth
		= '탈퇴한 회원입니다',
		m_Date = sysdate() WHERE m_id=#{m_Id}
	</update>

	<select id="checkId" resultType="int">
		select count(*) from member
		where m_Id = #{m_Id}
	</select>

	<update id="upPw">
		update member set m_Pw = #{m_Pw} where m_Id = #{m_Id}
	</update>

	<select id="findId" resultType="kr.co.everyfarm.user.MemberBean">
		select * from member where
		m_name=#{m_Name} and m_tel=#{m_Tel}
	</select>

	<select id="findPw" resultType="kr.co.everyfarm.user.MemberBean">
		select * from member where
		m_id=#{m_Id} and m_name=#{m_Name} and m_tel=#{m_Tel}
	</select>

	<!-- 결제 페이지 이용 -->

	<select id="userInfo"
		resultType="kr.co.everyfarm.user.MemberBean">
	    <![CDATA[
	    SELECT m_name, m_tel, m_addr FROM member where m_id = #{m_Id};
	   ]]>
	</select>

	<!-- 결제 페이지 이용 -->

</mapper>